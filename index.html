<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chain Reaction - Fun Word Association Game</title>
  <meta name="description"
    content="Chain Reaction is an exciting word association game where players connect words to form meaningful phrases. Challenge friends or play solo to test your vocabulary!">
  <meta name="keywords"
    content="word game, chain reaction game, word association, vocabulary game, brain game, word puzzle">
  <meta name="author" content="Your Name">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="apple-touch-icon" href="favicon.png">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://yourwebsite.com/chain-reaction">
  <meta property="og:title" content="Chain Reaction - Fun Word Association Game">
  <meta property="og:description"
    content="Test your vocabulary skills by connecting words in a chain. Perfect for family game night or classroom activities!">
  <meta property="og:image" content="og-image.png">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://yourwebsite.com/chain-reaction">
  <meta property="twitter:title" content="Chain Reaction - Fun Word Association Game">
  <meta property="twitter:description"
    content="Test your vocabulary skills by connecting words in a chain. Perfect for family game night or classroom activities!">
  <meta property="twitter:image" content="og-image.png">

  <!-- Canonical URL -->
  <link rel="canonical" href="https://yourwebsite.com/chain-reaction">

  <!-- Stylesheet -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Structured Data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Game",
      "name": "Chain Reaction Word Game",
      "description": "An interactive word association game where players connect words to form meaningful phrases.",
      "genre": ["Word Game", "Educational Game", "Puzzle Game"],
      "numberOfPlayers": {
        "@type": "QuantitativeValue",
        "minValue": 1,
        "maxValue": 2
      },
      "audience": {
        "@type": "PeopleAudience",
        "suggestedMinAge": 8
      },
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock"
      }
    }
    </script>
  <style>
    :root {
      --primary-color: #4B89DC;
      --secondary-color: #967ADC;
      --success-color: #48CFAD;
      --warning-color: #FFCE54;
      --danger-color: #ED5565;
      --dark-color: #434A54;
      --light-color: #F5F7FA;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f9f9;
      color: var(--dark-color);
      min-height: 100vh;
      padding: 0;
    }

    .game-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    .game-header {
      text-align: center;
      margin-bottom: 30px;
      padding: 20px;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      border-radius: 10px;
      color: white;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .game-board {
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    .chain-display {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin-bottom: 20px;
    }

    .chain-slots {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 30px;
      gap: 12px;
    }

    .chain-slot {
      width: 110px;
      height: 110px;
      border-radius: 10px;
      border: 2px dashed #ccc;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #999;
      font-size: 14px;
      position: relative;
      background-color: #f9f9f9;
    }

    .chain-slot.active {
      border-color: var(--primary-color);
      border-style: solid;
      background-color: rgba(75, 137, 220, 0.1);
    }

    .chain-slot.filled {
      border-color: var(--success-color);
      border-style: solid;
      background-color: white;
      color: var(--dark-color);
      font-weight: bold;
    }

    .slot-number {
      position: absolute;
      top: 5px;
      left: 5px;
      font-size: 12px;
      background-color: var(--light-color);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .slot-word {
      font-size: 20px;
      text-align: center;
      word-break: break-word;
      padding: 10px;
    }

    .words-display {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      background-color: var(--light-color);
      border-radius: 10px;
      min-height: 150px;
      position: relative;
      overflow: hidden;
    }

    .word-card {
      background-color: white;
      border: 2px solid var(--primary-color);
      border-radius: 8px;
      padding: 15px 25px;
      margin: 10px;
      font-size: 24px;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      position: relative;
      min-width: 200px;
      text-align: center;
    }

    .word-card.active {
      transform: scale(1.05);
      border-color: var(--secondary-color);
      background-color: var(--secondary-color);
      color: white;
      z-index: 2;
    }

    .word-card.correct {
      border-color: var(--success-color);
      background-color: var(--success-color);
      color: white;
    }

    .word-card.incorrect {
      border-color: var(--danger-color);
      background-color: var(--danger-color);
      color: white;
    }

    .fill-blanks {
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 15px 0;
      flex-wrap: wrap;
    }

    .blank-letter {
      width: 30px;
      height: 40px;
      margin: 0 5px;
      border-bottom: 3px solid var(--dark-color);
      font-size: 28px;
      font-weight: bold;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      text-transform: uppercase;
    }

    .blank-letter.filled {
      border-bottom-color: var(--primary-color);
      color: var(--primary-color);
      animation: popIn 0.2s ease;
    }

    .blank-letter.correct {
      border-bottom-color: var(--success-color);
      color: var(--success-color);
    }

    .blank-letter.incorrect {
      border-bottom-color: var(--danger-color);
      color: var(--danger-color);
    }

    .blank-letter.space {
      border-bottom: none;
      margin: 0 10px;
    }

    .player-controls {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin-top: 30px;
    }

    .answer-input {
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .game-input {
      padding: 15px;
      font-size: 20px;
      border-radius: 8px;
      border: 2px solid #ddd;
      flex-grow: 1;
      max-width: 400px;
      text-align: center;
      text-transform: uppercase;
    }

    .btn-game {
      padding: 15px 30px;
      font-size: 18px;
      font-weight: bold;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-primary {
      background-color: var(--primary-color);
      color: white;
    }

    .btn-primary:hover {
      background-color: #3A78CB;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background-color: var(--secondary-color);
      color: white;
    }

    .btn-secondary:hover {
      background-color: #856ACA;
      transform: translateY(-2px);
    }

    .btn-success {
      background-color: var(--success-color);
      color: white;
    }

    .btn-success:hover {
      background-color: #37BE9C;
      transform: translateY(-2px);
    }

    .btn-danger {
      background-color: var(--danger-color);
      color: white;
    }

    .btn-danger:hover {
      background-color: #DC4455;
      transform: translateY(-2px);
    }

    .player-score {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
      padding: 15px;
      background-color: white;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .score-card {
      text-align: center;
      padding: 10px 20px;
      border-radius: 8px;
      min-width: 150px;
    }

    .score-card.player1 {
      background-color: rgba(75, 137, 220, 0.1);
      border: 2px solid var(--primary-color);
    }

    .score-card.player2 {
      background-color: rgba(150, 122, 220, 0.1);
      border: 2px solid var(--secondary-color);
    }

    .score-value {
      font-size: 32px;
      font-weight: bold;
      margin: 10px 0;
    }

    .timer-container {
      text-align: center;
      margin: 20px 0;
    }

    .timer {
      font-size: 36px;
      font-weight: bold;
      color: var(--primary-color);
    }

    .game-status {
      text-align: center;
      margin: 15px 0;
      font-size: 20px;
      font-weight: bold;
      min-height: 30px;
    }

    .status-correct {
      color: var(--success-color);
    }

    .status-incorrect {
      color: var(--danger-color);
    }

    .bonus-message {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(255, 206, 84, 0.9);
      color: var(--dark-color);
      padding: 15px 30px;
      border-radius: 50px;
      font-size: 24px;
      font-weight: bold;
      z-index: 10;
      box-shadow: 0 0 20px rgba(255, 206, 84, 0.7);
      animation: bounceIn 0.5s;
    }

    .game-instructions {
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      margin-top: 30px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .game-instructions h3 {
      color: var(--primary-color);
      margin-bottom: 15px;
    }

    .word-nav {
      display: flex;
      justify-content: space-between;
      margin-bottom: 15px;
    }

    .word-number {
      background-color: var(--light-color);
      padding: 10px 15px;
      border-radius: 50px;
      font-weight: bold;
    }

    .tooltip-container {
      position: relative;
      display: inline-block;
    }

    .tooltip-text {
      visibility: hidden;
      width: 200px;
      background-color: var(--dark-color);
      color: white;
      text-align: center;
      border-radius: 6px;
      padding: 10px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .tooltip-container:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }

    @keyframes pulse {
      0% {
        opacity: 0.6;
      }

      50% {
        opacity: 1;
      }

      100% {
        opacity: 0.6;
      }
    }

    @keyframes bounceIn {
      0% {
        transform: translate(-50%, -50%) scale(0.1);
        opacity: 0;
      }

      60% {
        transform: translate(-50%, -50%) scale(1.2);
        opacity: 1;
      }

      100% {
        transform: translate(-50%, -50%) scale(1);
      }
    }

    @keyframes popIn {
      0% {
        transform: scale(0.5);
        opacity: 0;
      }

      80% {
        transform: scale(1.2);
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    .game-mode-selection {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .mode-card {
      background-color: white;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      width: 200px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .mode-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .mode-card.selected {
      border: 3px solid var(--primary-color);
    }

    .mode-icon {
      font-size: 32px;
      margin-bottom: 10px;
      color: var(--primary-color);
    }

    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #f00;
      border-radius: 50%;
      animation: fall 5s linear forwards;
    }

    @keyframes fall {
      0% {
        transform: translateY(-100px) rotate(0deg);
        opacity: 1;
      }

      100% {
        transform: translateY(calc(100vh - 100px)) rotate(360deg);
        opacity: 0;
      }
    }

    .virtual-keyboard {
      margin-top: 15px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .key {
      width: 40px;
      height: 40px;
      margin: 3px;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: var(--light-color);
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
      user-select: none;
      transition: all 0.2s ease;
    }

    .key:hover {
      background-color: var(--primary-color);
      color: white;
    }

    .key.used {
      background-color: #ccc;
      color: #666;
      cursor: not-allowed;
    }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .game-container {
        padding: 10px;
      }

      .chain-slot {
        width: 80px;
        height: 80px;
        font-size: 12px;
      }

      .slot-word {
        font-size: 16px;
        padding: 5px;
      }

      .word-card {
        font-size: 18px;
        padding: 10px 15px;
        margin: 5px;
      }

      .blank-letter {
        width: 25px;
        height: 35px;
        font-size: 22px;
        margin: 0 3px;
      }

      .game-input {
        padding: 10px;
        font-size: 16px;
      }

      .btn-game {
        padding: 10px 20px;
        font-size: 16px;
      }

      .score-value {
        font-size: 24px;
      }

      .game-mode-selection {
        flex-direction: column;
        align-items: center;
      }

      .mode-card {
        width: 100%;
        max-width: 300px;
      }

      .key {
        width: 30px;
        height: 30px;
        font-size: 14px;
      }
    }
  </style>
</head>

<body>
  <div class="game-container">
    <div class="game-header">
      <h1><i class="fas fa-link"></i> Chain Reaction</h1>
      <p>Fill in the blanks to form a chain of connected words!</p>
    </div>

    <div id="setup-screen">
      <div class="game-board">
        <h2 class="text-center mb-4">Game Setup</h2>

        <div class="mb-4">
          <h3><i class="fas fa-users"></i> Player Mode</h3>
          <div class="game-mode-selection">
            <div class="mode-card selected" data-mode="single">
              <div class="mode-icon"><i class="fas fa-user"></i></div>
              <h4>Single Player</h4>
              <p>Challenge yourself!</p>
            </div>
            <div class="mode-card" data-mode="multi">
              <div class="mode-icon"><i class="fas fa-user-friends"></i></div>
              <h4>Two Players</h4>
              <p>Play with a friend!</p>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <h3><i class="fas fa-cog"></i> Game Options</h3>
          <div class="form-check form-switch ms-3 my-3">
            <input class="form-check-input" type="checkbox" id="timedMode">
            <label class="form-check-label" for="timedMode">Timed Mode (30 seconds per turn)</label>
          </div>
        </div>

        <div class="text-center mt-4">
          <button id="startGameBtn" class="btn-game btn-primary">
            <i class="fas fa-play-circle"></i> Start Game
          </button>
        </div>
      </div>

      <div class="game-instructions">
        <h3><i class="fas fa-info-circle"></i> How to Play</h3>
        <p>Complete the word chain by guessing each next word in the sequence.</p>
        <ul>
          <li>The game will show you the first word in a 7-word chain.</li>
          <li>You need to guess the next word that forms a meaningful connection with the current word.</li>
          <li>Fill in the blank spaces using the keyboard or by typing.</li>
          <li>Each correct guess reveals the next word in the chain.</li>
          <li>Complete all 6 guesses to finish the chain of 7 words.</li>
          <li>In 2-player mode, each player gets exactly 3 turns!</li>
        </ul>
      </div>
    </div>

    <div id="game-screen" style="display: none;">
      <div class="game-board">
        <div class="word-nav">
          <div class="word-number">Chain Progress: <span id="progressText">1/6</span></div>
          <div class="word-number">Turn: <span id="currentPlayer">Player 1</span></div>
        </div>

        <div class="chain-display">
          <div class="chain-slots" id="chainSlots">
            <!-- Chain slots will be generated here -->
          </div>
        </div>

        <div class="words-display" id="wordsDisplay">
          <!-- Current word will be displayed here -->
          <div class="word-card active" id="currentWord">Word</div>

          <div class="direction-indicator">
            connects to
            <span class="direction-arrow"><i class="fas fa-arrow-right"></i></span>
          </div>

          <!-- Blanks will be displayed here -->
          <div class="fill-blanks" id="fillBlanks"></div>
        </div>

        <div id="bonus-message" style="display: none;" class="bonus-message">
          <i class="fas fa-star"></i> BONUS POINTS! <i class="fas fa-star"></i>
        </div>

        <div id="timerContainer" class="timer-container" style="display: none;">
          <div class="timer" id="timer">30</div>
          <p>seconds remaining</p>
        </div>

        <div class="game-status" id="gameStatus"></div>

        <div class="player-controls">
          <div class="answer-input">
            <input type="text" id="phraseInput" class="game-input" placeholder="Type your answer..." autocomplete="off"
              maxlength="15">
            <button id="submitBtn" class="btn-game btn-primary">
              <i class="fas fa-check-circle"></i> Submit
            </button>
          </div>

          <div class="virtual-keyboard" id="virtualKeyboard">
            <!-- Virtual keyboard will be generated here -->
          </div>

          <div class="d-flex justify-content-center gap-3 mt-3">
            <button id="skipBtn" class="btn-game btn-secondary">
              <i class="fas fa-forward"></i> Skip
            </button>
            <button id="hintBtn" class="btn-game btn-warning">
              <i class="fas fa-lightbulb"></i> Hint
            </button>
          </div>
        </div>

        <div class="player-score">
          <div class="score-card player1">
            <h4>Player 1</h4>
            <div class="score-value" id="player1Score">0</div>
            <div class="streak" id="player1Streak">Streak: 0</div>
          </div>

          <div class="score-card player2" id="player2ScoreCard" style="display: none;">
            <h4>Player 2</h4>
            <div class="score-value" id="player2Score">0</div>
            <div class="streak" id="player2Streak">Streak: 0</div>
          </div>
        </div>
      </div>

      <div class="text-center mt-4">
        <button id="endGameBtn" class="btn-game btn-danger">
          <i class="fas fa-stop-circle"></i> End Game
        </button>
      </div>
    </div>

    <div id="results-screen" style="display: none;">
      <div class="game-board">
        <h2 class="text-center mb-4">Game Results</h2>

        <div id="winnerDisplay" class="text-center mb-4">
          <h3>Congratulations!</h3>
          <div class="winner-name display-5 fw-bold text-primary mb-3"></div>
        </div>

        <div class="row justify-content-center">
          <div class="col-md-8">
            <div class="final-scores">
              <h4 class="text-center mb-3">Final Scores</h4>
              <div class="d-flex justify-content-around">
                <div class="text-center">
                  <h5>Player 1</h5>
                  <div class="display-6 fw-bold" id="finalPlayer1Score">0</div>
                </div>
                <div class="text-center" id="finalPlayer2Container" style="display: none;">
                  <h5>Player 2</h5>
                  <div class="display-6 fw-bold" id="finalPlayer2Score">0</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="completed-chain text-center mt-4">
          <h4>Your Completed Chain</h4>
          <div id="completedChainDisplay" class="d-flex justify-content-center flex-wrap mt-3 gap-2">
            <!-- Completed chain will be displayed here -->
          </div>
        </div>

        <div class="text-center mt-4">
          <button id="playAgainBtn" class="btn-game btn-primary me-3">
            <i class="fas fa-redo"></i> Play Again
          </button>
          <button id="newGameBtn" class="btn-game btn-secondary">
            <i class="fas fa-cog"></i> New Game Setup
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Game state
      const gameState = {
        playerMode: 'single', // 'single' or 'multi'
        timedMode: false,
        chainLength: 7, // Fixed at 7 words
        currentPosition: 0,
        currentPlayer: 1,
        scores: [0, 0],
        streaks: [0, 0],
        gameActive: false,
        chain: [],
        timer: null,
        timeRemaining: 30,
        correctAnswers: [],
        consecutiveCorrect: 0,
        currentGuess: [],
        currentTarget: '',
        usedLetters: new Set(),
        startPosition: 0
      };

      // Word database - the chain of 200 words provided
      const words = [
        "Green", "Tea", "Cup", "Holder", "Card", "Shark", "Tank", "Top", "Gear", "Shift",
        "Change", "Room", "Temperature", "Gauge", "Pressure", "Cooker", "Hood", "Ornament", "Tree", "Frog",
        "Leg", "Room", "Service", "Dog", "House", "Call", "Center", "Stage", "Fright", "Night",
        "Shift", "Key", "Chain", "Reaction", "Time", "Frame", "Work", "Place", "Holder", "Account",
        "Balance", "Beam", "Splitter", "Plate", "Glass", "Ceiling", "Fan", "Mail", "Box", "Office",
        "Chair", "Lift", "Off", "Side", "Dish", "Soap", "Bubble", "Bath", "Tub", "Cleaner",
        "Air", "Conditioner", "Unit", "Test", "Drive", "Through", "Pass", "Word", "Game", "Show",
        "Stopper", "Cork", "Screw", "Driver", "Seat", "Belt", "Buckle", "Down", "Town", "Hall",
        "Mark", "Twain", "River", "Bank", "Statement", "Piece", "Meal", "Ticket", "Counter", "Top",
        "Secret", "Agent", "Orange", "Juice", "Box", "Cutter", "Blade", "Runner", "Bean", "Sprout",
        "Seed", "Bank", "Loan", "Officer", "Candidate", "Pool", "Party", "Favor", "Return", "Journey",
        "Planner", "Notebook", "Page", "Number", "Line", "Dance", "Floor", "Plan", "Ahead", "Start",
        "Point", "Blank", "Check", "Mark", "Down", "Payment", "Gateway", "Arch", "Enemy", "Territory",
        "Border", "Line", "Graph", "Paper", "Trail", "Mix", "Tape", "Recorder", "Instrument", "Panel",
        "Discussion", "Forum", "Post", "Office", "Worker", "Bee", "Hive", "Mind", "Reader", "Response",
        "Time", "Capsule", "Hotel", "Room", "Key", "Board", "Game", "Over", "Load", "Bearing",
        "Fruit", "Punch", "Card", "Deck", "Chair", "Person", "Hood", "Wink", "Eye", "Witness",
        "Stand", "Firm", "Belief", "System", "Check", "Mate", "Ship", "Captain", "America", "West",
        "Coast", "Guard", "Rail", "Road", "Block", "Chain", "Link", "Fence", "Post", "Script",
        "Writer", "Ghost", "Story", "Teller", "Machine", "Learning", "Curve", "Ball", "Park", "Ranger"
      ];

      // DOM Elements
      const setupScreen = document.getElementById('setup-screen');
      const gameScreen = document.getElementById('game-screen');
      const resultsScreen = document.getElementById('results-screen');
      const wordsDisplay = document.getElementById('wordsDisplay');
      const currentWordElement = document.getElementById('currentWord');
      const fillBlanks = document.getElementById('fillBlanks');
      const phraseInput = document.getElementById('phraseInput');
      const submitBtn = document.getElementById('submitBtn');
      const skipBtn = document.getElementById('skipBtn');
      const hintBtn = document.getElementById('hintBtn');
      const gameStatus = document.getElementById('gameStatus');
      const player1Score = document.getElementById('player1Score');
      const player2Score = document.getElementById('player2Score');
      const player1Streak = document.getElementById('player1Streak');
      const player2Streak = document.getElementById('player2Streak');
      const player2ScoreCard = document.getElementById('player2ScoreCard');
      const timerContainer = document.getElementById('timerContainer');
      const timerElement = document.getElementById('timer');
      const currentPlayerElement = document.getElementById('currentPlayer');
      const progressTextElement = document.getElementById('progressText');
      const bonusMessage = document.getElementById('bonus-message');
      const startGameBtn = document.getElementById('startGameBtn');
      const endGameBtn = document.getElementById('endGameBtn');
      const playAgainBtn = document.getElementById('playAgainBtn');
      const newGameBtn = document.getElementById('newGameBtn');
      const timedModeCheckbox = document.getElementById('timedMode');
      const modeCards = document.querySelectorAll('.mode-card');
      const finalPlayer1Score = document.getElementById('finalPlayer1Score');
      const finalPlayer2Score = document.getElementById('finalPlayer2Score');
      const finalPlayer2Container = document.getElementById('finalPlayer2Container');
      const winnerNameElement = document.querySelector('.winner-name');
      const chainSlotsElement = document.getElementById('chainSlots');
      const completedChainDisplay = document.getElementById('completedChainDisplay');
      const virtualKeyboard = document.getElementById('virtualKeyboard');

      // Setup event listeners
      modeCards.forEach(card => {
        card.addEventListener('click', function () {
          modeCards.forEach(c => c.classList.remove('selected'));
          this.classList.add('selected');
          gameState.playerMode = this.dataset.mode;
        });
      });

      timedModeCheckbox.addEventListener('change', function () {
        gameState.timedMode = this.checked;
      });

      startGameBtn.addEventListener('click', startGame);
      endGameBtn.addEventListener('click', endGame);
      playAgainBtn.addEventListener('click', () => {
        resetGame();
        startGame();
      });
      newGameBtn.addEventListener('click', () => {
        resetGame();
        showScreen('setup');
      });

      submitBtn.addEventListener('click', checkAnswer);
      skipBtn.addEventListener('click', skipTurn);
      hintBtn.addEventListener('click', showHint);

      // Handle keyboard input for the game
      phraseInput.addEventListener('input', updateBlanks);
      phraseInput.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
          checkAnswer();
        }
      });

      // Create virtual keyboard
      function createVirtualKeyboard() {
        virtualKeyboard.innerHTML = '';
        gameState.usedLetters.clear();

        const keys = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
        keys.forEach(key => {
          const keyElement = document.createElement('div');
          keyElement.className = 'key';
          keyElement.textContent = key;
          keyElement.addEventListener('click', () => {
            if (!keyElement.classList.contains('used')) {
              handleKeyPress(key);
            }
          });
          virtualKeyboard.appendChild(keyElement);
        });
      }

      // Handle keyboard input
      function handleKeyPress(key) {
        if (!gameState.gameActive) return;

        // Update input field and trigger fill
        const currentInput = phraseInput.value.toUpperCase();
        phraseInput.value = currentInput + key;

        // Mark key as used
        markKeyAsUsed(key);

        // Update blanks
        updateBlanks();
      }

      function markKeyAsUsed(key) {
        gameState.usedLetters.add(key);
        document.querySelectorAll('.key').forEach(keyElement => {
          if (keyElement.textContent === key) {
            keyElement.classList.add('used');
          }
        });
      }

      // Update blank spaces with input
      function updateBlanks() {
        const input = phraseInput.value.toUpperCase();
        const blanks = document.querySelectorAll('.blank-letter');

        for (let i = 0; i < blanks.length; i++) {
          if (i < input.length) {
            blanks[i].textContent = input[i];
            blanks[i].classList.add('filled');
          } else {
            blanks[i].textContent = '';
            blanks[i].classList.remove('filled');
          }
        }
      }

      // Initialize chain slots
      function initializeChainSlots() {
        chainSlotsElement.innerHTML = '';

        for (let i = 0; i < gameState.chainLength; i++) {
          const slot = document.createElement('div');
          slot.className = 'chain-slot';
          if (i === 0) {
            slot.classList.add('filled');
          }

          const slotNumber = document.createElement('span');
          slotNumber.className = 'slot-number';
          slotNumber.textContent = i + 1;

          const slotWord = document.createElement('div');
          slotWord.className = 'slot-word';
          if (i === 0) {
            // First word is already revealed
            slotWord.textContent = gameState.chain[0];
          } else {
            slotWord.textContent = '?';
          }

          slot.appendChild(slotNumber);
          slot.appendChild(slotWord);
          chainSlotsElement.appendChild(slot);
        }

        // Highlight the active slot
        updateActiveSlot();
      }

      // Update active slot
      function updateActiveSlot() {
        const slots = document.querySelectorAll('.chain-slot');
        slots.forEach((slot, index) => {
          slot.classList.remove('active');

          if (index === gameState.currentPosition + 1 &&
            index < gameState.chainLength &&
            !slot.classList.contains('filled')) {
            slot.classList.add('active');
          }
        });
      }

      // Update progress text
      function updateProgressText() {
        const currentProgress = Math.min(gameState.currentPosition + 1, gameState.chainLength);
        progressTextElement.textContent = `${currentProgress}/${gameState.chainLength}`;
      }

      // Game functions
      function startGame() {
        // Generate a random starting position
        gameState.startPosition = Math.floor(Math.random() * (words.length - gameState.chainLength + 1));

        // Set up the game
        gameState.gameActive = true;
        gameState.currentPosition = 0;
        gameState.currentPlayer = 1;
        gameState.scores = [0, 0];
        gameState.streaks = [0, 0];
        gameState.consecutiveCorrect = 0;
        gameState.correctAnswers = [];

        // Get the chain of words
        gameState.chain = words.slice(gameState.startPosition, gameState.startPosition + gameState.chainLength);

        // Update UI
        player1Score.textContent = '0';
        player2Score.textContent = '0';
        player1Streak.textContent = 'Streak: 0';
        player2Streak.textContent = 'Streak: 0';

        if (gameState.playerMode === 'multi') {
          player2ScoreCard.style.display = 'block';
          finalPlayer2Container.style.display = 'block';
        } else {
          player2ScoreCard.style.display = 'none';
          finalPlayer2Container.style.display = 'none';
        }

        currentPlayerElement.textContent = 'Player 1';

        // Initialize chain slots
        initializeChainSlots();

        // Update progress text
        updateProgressText();

        // Create virtual keyboard
        createVirtualKeyboard();

        // Show game screen
        showScreen('game');

        // Display the first word
        updateWordDisplay();

        // Start timer if in timed mode
        if (gameState.timedMode) {
          timerContainer.style.display = 'block';
          startTimer();
        } else {
          timerContainer.style.display = 'none';
        }

        // Focus on input
        phraseInput.focus();
      }

      function updateWordDisplay() {
        if (gameState.currentPosition >= gameState.chainLength - 1) {
          endGame();
          return;
        }

        // Reset UI
        phraseInput.value = '';
        gameStatus.textContent = '';
        gameStatus.className = 'game-status';

        // Display the current word in the chain
        currentWordElement.textContent = gameState.chain[gameState.currentPosition];
        currentWordElement.className = 'word-card active';

        // Set up the target word for fill-in-the-blank
        const targetWord = gameState.chain[gameState.currentPosition + 1];
        gameState.currentTarget = targetWord;

        // Create blanks for the target word
        fillBlanks.innerHTML = '';
        for (let i = 0; i < targetWord.length; i++) {
          const blankLetter = document.createElement('div');
          blankLetter.className = 'blank-letter';
          fillBlanks.appendChild(blankLetter);
        }

        // Reset virtual keyboard
        createVirtualKeyboard();

        // Update active slot
        updateActiveSlot();

        // Update progress text
        updateProgressText();

        // If in timed mode, reset timer
        if (gameState.timedMode) {
          resetTimer();
        }

        // Focus on input
        phraseInput.focus();
      }

      function checkAnswer() {
        if (!gameState.gameActive) return;

        const userGuess = phraseInput.value.trim().toUpperCase();
        const targetWord = gameState.currentTarget.toUpperCase();

        // Check if the guess is correct
        const isCorrect = userGuess === targetWord;

        if (isCorrect) {
          // Update UI to show correct answer
          currentWordElement.classList.add('correct');

          const blanks = document.querySelectorAll('.blank-letter');
          blanks.forEach(blank => blank.classList.add('correct'));

          gameStatus.textContent = 'Correct!';
          gameStatus.className = 'game-status status-correct';

          // Update score
          const playerIndex = gameState.currentPlayer - 1;
          gameState.scores[playerIndex]++;
          gameState.streaks[playerIndex]++;

          if (gameState.currentPlayer === 1) {
            player1Score.textContent = gameState.scores[0];
            player1Streak.textContent = 'Streak: ' + gameState.streaks[0];
          } else {
            player2Score.textContent = gameState.scores[1];
            player2Streak.textContent = 'Streak: ' + gameState.streaks[1];
          }

          // Check for consecutive correct answers
          gameState.consecutiveCorrect++;
          if (gameState.consecutiveCorrect === 5) {
            // Award bonus points
            gameState.scores[playerIndex]++;
            if (gameState.currentPlayer === 1) {
              player1Score.textContent = gameState.scores[0];
            } else {
              player2Score.textContent = gameState.scores[1];
            }

            // Show bonus message
            bonusMessage.style.display = 'block';
            setTimeout(() => {
              bonusMessage.style.display = 'none';
            }, 2000);

            // Create confetti effect
            createConfetti();

            // Reset consecutive counter
            gameState.consecutiveCorrect = 0;
          }

          // Store correct answer
          gameState.correctAnswers.push(gameState.currentPosition);

          // Update chain slots
          const slots = document.querySelectorAll('.chain-slot');
          if (gameState.currentPosition + 1 < slots.length) {
            slots[gameState.currentPosition + 1].classList.add('filled');
            slots[gameState.currentPosition + 1].querySelector('.slot-word').textContent = targetWord;
          }

          // Animate transition
          gsap.to(currentWordElement, {
            scale: 1.1,
            duration: 0.3,
            yoyo: true,
            repeat: 1
          });

          // Move to next word after delay
          setTimeout(() => {
            gameState.currentPosition++;
            updateWordDisplay();

            // Switch player in multiplayer mode
            if (gameState.playerMode === 'multi') {
              gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
              currentPlayerElement.textContent = 'Player ' + gameState.currentPlayer;
            }
          }, 1500);
        } else {
          // Show incorrect feedback
          currentWordElement.classList.add('incorrect');

          const blanks = document.querySelectorAll('.blank-letter');
          blanks.forEach(blank => {
            if (blank.classList.contains('filled')) {
              blank.classList.add('incorrect');
            }
          });

          gameStatus.textContent = 'Try again! That\'s not the right word.';
          gameStatus.className = 'game-status status-incorrect';

          // Reset streak
          const playerIndex = gameState.currentPlayer - 1;
          gameState.streaks[playerIndex] = 0;

          if (gameState.currentPlayer === 1) {
            player1Streak.textContent = 'Streak: 0';
          } else {
            player2Streak.textContent = 'Streak: 0';
          }

          gameState.consecutiveCorrect = 0;

          // Reset after delay
          setTimeout(() => {
            currentWordElement.classList.remove('incorrect');
            blanks.forEach(blank => blank.classList.remove('incorrect'));
            phraseInput.value = '';
            updateBlanks();
            gameStatus.textContent = '';
          }, 1500);
        }
      }

      function skipTurn() {
        if (!gameState.gameActive) return;

        // Show the correct answer
        fillBlanks.innerHTML = '';
        for (let i = 0; i < gameState.currentTarget.length; i++) {
          const letter = document.createElement('div');
          letter.className = 'blank-letter correct';
          letter.textContent = gameState.currentTarget[i].toUpperCase();
          fillBlanks.appendChild(letter);
        }

        gameStatus.textContent = `The answer was "${gameState.currentTarget}"`;
        gameStatus.className = 'game-status';

        // Update chain slots
        const slots = document.querySelectorAll('.chain-slot');
        if (gameState.currentPosition + 1 < slots.length) {
          slots[gameState.currentPosition + 1].classList.add('filled');
          slots[gameState.currentPosition + 1].querySelector('.slot-word').textContent = gameState.currentTarget;
        }

        // Reset streak
        const playerIndex = gameState.currentPlayer - 1;
        gameState.streaks[playerIndex] = 0;

        if (gameState.currentPlayer === 1) {
          player1Streak.textContent = 'Streak: 0';
        } else {
          player2Streak.textContent = 'Streak: 0';
        }

        gameState.consecutiveCorrect = 0;

        // Move to next word after delay
        setTimeout(() => {
          gameState.currentPosition++;
          updateWordDisplay();

          // Switch player in multiplayer mode
          if (gameState.playerMode === 'multi') {
            gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
            currentPlayerElement.textContent = 'Player ' + gameState.currentPlayer;
          }
        }, 2000);
      }

      function showHint() {
        if (!gameState.gameActive) return;

        const targetWord = gameState.currentTarget.toUpperCase();
        const blanks = document.querySelectorAll('.blank-letter');

        // Find an unfilled blank to reveal
        let revealedIndex = -1;
        for (let i = 0; i < blanks.length; i++) {
          if (!blanks[i].classList.contains('filled')) {
            revealedIndex = i;
            break;
          }
        }

        if (revealedIndex !== -1) {
          // Reveal the letter
          const letter = targetWord[revealedIndex];
          blanks[revealedIndex].textContent = letter;
          blanks[revealedIndex].classList.add('filled');

          // Update input field
          let currentInput = phraseInput.value.toUpperCase();
          currentInput = currentInput.padEnd(revealedIndex, ' ').split('');
          currentInput[revealedIndex] = letter;
          currentInput = currentInput.join('').trim();
          phraseInput.value = currentInput;

          // Mark the key as used
          markKeyAsUsed(letter);

          // Apply small penalty (optional)
          if (gameState.consecutiveCorrect > 0) {
            gameState.consecutiveCorrect--;
          }
        } else {
          gameStatus.textContent = 'All letters are already filled!';
        }
      }

      function startTimer() {
        gameState.timeRemaining = 30;
        timerElement.textContent = gameState.timeRemaining;

        clearInterval(gameState.timer);
        gameState.timer = setInterval(() => {
          gameState.timeRemaining--;
          timerElement.textContent = gameState.timeRemaining;

          // Warning colors
          if (gameState.timeRemaining <= 10) {
            timerElement.style.color = '#ED5565';
          } else {
            timerElement.style.color = '#4B89DC';
          }

          if (gameState.timeRemaining <= 0) {
            clearInterval(gameState.timer);
            timeUp();
          }
        }, 1000);
      }

      function resetTimer() {
        clearInterval(gameState.timer);
        if (gameState.timedMode) {
          startTimer();
        }
      }

      function timeUp() {
        // Show the correct answer
        fillBlanks.innerHTML = '';
        for (let i = 0; i < gameState.currentTarget.length; i++) {
          const letter = document.createElement('div');
          letter.className = 'blank-letter correct';
          letter.textContent = gameState.currentTarget[i].toUpperCase();
          fillBlanks.appendChild(letter);
        }

        gameStatus.textContent = `Time's up! The answer was "${gameState.currentTarget}"`;
        gameStatus.className = 'game-status status-incorrect';

        // Update chain slots
        const slots = document.querySelectorAll('.chain-slot');
        if (gameState.currentPosition + 1 < slots.length) {
          slots[gameState.currentPosition + 1].classList.add('filled');
          slots[gameState.currentPosition + 1].querySelector('.slot-word').textContent = gameState.currentTarget;
        }

        // Reset streak
        const playerIndex = gameState.currentPlayer - 1;
        gameState.streaks[playerIndex] = 0;

        if (gameState.currentPlayer === 1) {
          player1Streak.textContent = 'Streak: 0';
        } else {
          player2Streak.textContent = 'Streak: 0';
        }

        gameState.consecutiveCorrect = 0;

        // Move to next word after delay
        setTimeout(() => {
          gameState.currentPosition++;
          updateWordDisplay();

          // Switch player in multiplayer mode
          if (gameState.playerMode === 'multi') {
            gameState.currentPlayer = gameState.currentPlayer === 1 ? 2 : 1;
            currentPlayerElement.textContent = 'Player ' + gameState.currentPlayer;
          }
        }, 2000);
      }

      function endGame() {
        gameState.gameActive = false;
        clearInterval(gameState.timer);

        // Update final scores
        finalPlayer1Score.textContent = gameState.scores[0];
        finalPlayer2Score.textContent = gameState.scores[1];

        // Determine winner
        let winnerText = '';
        if (gameState.playerMode === 'multi') {
          if (gameState.scores[0] > gameState.scores[1]) {
            winnerText = 'Player 1 Wins!';
          } else if (gameState.scores[1] > gameState.scores[0]) {
            winnerText = 'Player 2 Wins!';
          } else {
            winnerText = 'It\'s a Tie!';
          }
        } else {
          winnerText = `You Scored ${gameState.scores[0]} Points!`;
        }
        winnerNameElement.textContent = winnerText;

        // Display the completed chain
        displayCompletedChain();

        // Show results screen
        showScreen('results');
      }

      function displayCompletedChain() {
        completedChainDisplay.innerHTML = '';

        gameState.chain.forEach((word, index) => {
          const wordElement = document.createElement('div');
          wordElement.className = 'btn btn-outline-primary m-1';
          wordElement.textContent = word;

          if (index < gameState.chain.length - 1) {
            const arrowElement = document.createElement('span');
            arrowElement.innerHTML = '<i class="fas fa-arrow-right mx-1"></i>';
            completedChainDisplay.appendChild(wordElement);
            completedChainDisplay.appendChild(arrowElement);
          } else {
            completedChainDisplay.appendChild(wordElement);
          }
        });
      }

      function resetGame() {
        gameState.currentPosition = 0;
        gameState.currentPlayer = 1;
        gameState.scores = [0, 0];
        gameState.streaks = [0, 0];
        gameState.gameActive = false;
        gameState.correctAnswers = [];
        gameState.consecutiveCorrect = 0;
        gameState.usedLetters.clear();

        clearInterval(gameState.timer);
      }

      function showScreen(screen) {
        setupScreen.style.display = screen === 'setup' ? 'block' : 'none';
        gameScreen.style.display = screen === 'game' ? 'block' : 'none';
        resultsScreen.style.display = screen === 'results' ? 'block' : 'none';
      }

      function createConfetti() {
        for (let i = 0; i < 50; i++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          const size = Math.floor(Math.random() * 10) + 5;
          confetti.style.width = `${size}px`;
          confetti.style.height = `${size}px`;
          confetti.style.backgroundColor = getRandomColor();
          confetti.style.left = `${Math.random() * 100}%`;
          confetti.style.top = `-10px`;
          confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
          document.body.appendChild(confetti);

          // Remove after animation
          setTimeout(() => {
            confetti.remove();
          }, 5000);
        }
      }

      function getRandomColor() {
        const colors = [
          '#FF6B6B', '#4ECDC4', '#FFD166', '#F9F871',
          '#6699CC', '#FF8C94', '#91A6FF', '#88D8B0'
        ];
        return colors[Math.floor(Math.random() * colors.length)];
      }
    });
  </script>
</body>

</html>